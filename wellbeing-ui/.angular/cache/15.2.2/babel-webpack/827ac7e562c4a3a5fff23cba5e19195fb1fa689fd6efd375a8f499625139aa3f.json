{"ast":null,"code":"import { MatDialogConfig } from '@angular/material/dialog';\nimport { SnackBarDistractionComponent } from '../snack-bar-distraction/snack-bar-distraction.component';\nimport { MeditationSummaryComponent } from '../meditation-summary/meditation-summary.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/icon\";\nconst _c0 = [\"secondsLine\"];\nfunction MeditationComponent_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function MeditationComponent_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addDistraction());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"add_circle\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Distraction \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class MeditationComponent {\n  constructor(activatedroute, router, snackBar, dialog) {\n    this.activatedroute = activatedroute;\n    this.router = router;\n    this.snackBar = snackBar;\n    this.dialog = dialog;\n    this.distractions = 0;\n    this.isDistractedButtonVisible = false;\n    this.isSummaryPanelVisible = false;\n    this.isStopWatchVisible = false;\n    this.secondsDisplay = '';\n    this.minutesDisplay = '';\n    this.seconds = 60;\n    this.minutes = 0;\n    this.totalTime = 0;\n    this.minutesToSeconds = 0;\n    this.degreesForSecond = 0;\n    this.degreesAccumulator = 0;\n    this.activatedroute.params.subscribe(data => {\n      this.minutes = data.minutes;\n    });\n    if (this.minutes <= 0) this.router.navigate(['/set-meditation-time']);\n  }\n  ngOnInit() {\n    this.isDistractedButtonVisible = true;\n    this.isStopWatchVisible = true;\n    this.totalTime = this.minutes;\n    this.minutesToSeconds = this.minutes * 60;\n    this.degreesForSecond = 360 / this.minutesToSeconds;\n    this.degreesAccumulator = this.degreesForSecond;\n    this.minutes--;\n    this.playBell();\n    this.startMeditation();\n  }\n  playBell() {\n    const audio = new Audio('assets/sound/tibetan-bell-sound-8s.mp3');\n    audio.play();\n  }\n  startMeditation() {\n    let timeoutId = setTimeout(() => {\n      this.seconds--;\n      if (this.seconds == -1) {\n        this.minutes -= 1;\n        this.seconds = 59;\n      }\n      if (this.seconds < 10) {\n        this.secondsDisplay = '0' + this.seconds;\n      } else {\n        this.secondsDisplay = this.seconds.toString();\n      }\n      if (this.minutes < 10) {\n        this.minutesDisplay = '0' + this.minutes;\n      } else {\n        this.minutesDisplay = this.minutes.toString();\n      }\n      this.secondsLine.nativeElement.style.transform = 'rotate(' + this.degreesAccumulator + 'deg)';\n      this.degreesAccumulator += this.degreesForSecond;\n      if (this.minutes == 0 && this.seconds == 0) {\n        this.playBell();\n        this.isSummaryPanelVisible = true;\n        this.isDistractedButtonVisible = false;\n        this.isStopWatchVisible = false;\n        clearTimeout(timeoutId);\n        return;\n      }\n      this.startMeditation();\n    }, 1000);\n  }\n  addDistraction() {\n    this.distractions += 1;\n    this.openDistractionSnackBar();\n  }\n  openDistractionSnackBar() {\n    this.snackBar.openFromComponent(SnackBarDistractionComponent, {\n      duration: 8 * 1000\n    });\n  }\n  openDialog() {\n    const dialogConfig = new MatDialogConfig();\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = true;\n    dialogConfig.data = {\n      minutes: this.minutes,\n      distractions: this.distractions\n    };\n    this.dialog.open(MeditationSummaryComponent, dialogConfig);\n  }\n}\nMeditationComponent.ɵfac = function MeditationComponent_Factory(t) {\n  return new (t || MeditationComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.MatDialog));\n};\nMeditationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MeditationComponent,\n  selectors: [[\"app-meditation\"]],\n  viewQuery: function MeditationComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.secondsLine = _t.first);\n    }\n  },\n  decls: 18,\n  vars: 3,\n  consts: [[\"id\", \"stopwatch-container\"], [1, \"clock\"], [\"viewBox\", \"0 0 120 120\", \"version\", \"1.1\", \"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"circle\"], [\"cx\", \"60\", \"cy\", \"60\", \"r\", \"60\", 1, \"outer-circle\"], [\"cx\", \"60\", \"cy\", \"60\", \"r\", \"57\"], [\"x1\", \"60\", \"y1\", \"0\", \"x2\", \"60\", \"y2\", \"60\", 1, \"seconds\"], [\"secondsLine\", \"\"], [\"cx\", \"60\", \"cy\", \"60\", \"r\", \"3\", 1, \"center-circle\"], [\"x1\", \"60\", \"y1\", \"5\", \"x2\", \"60\", \"y2\", \"10\", 1, \"line\"], [\"id\", \"stopwatch\"], [\"id\", \"notifications\"], [1, \"buttons-container\"], [\"onclick\", \"pause()\", \"id\", \"pauseButton\"], [\"mat-icon-button\", \"\", 3, \"click\", 4, \"ngIf\"], [\"mat-icon-button\", \"\", 3, \"click\"]],\n  template: function MeditationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"Meditate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(4, \"svg\", 2);\n      i0.ɵɵelement(5, \"circle\", 3)(6, \"circle\", 4)(7, \"line\", 5, 6)(9, \"circle\", 7)(10, \"line\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelementStart(11, \"div\", 9);\n      i0.ɵɵtext(12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"div\", 10);\n      i0.ɵɵelementStart(14, \"div\", 11)(15, \"button\", 12);\n      i0.ɵɵtext(16, \"Pause\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(17, MeditationComponent_button_17_Template, 4, 0, \"button\", 13);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate2(\"\", ctx.minutesDisplay, \":\", ctx.secondsDisplay, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.isDistractedButtonVisible);\n    }\n  },\n  dependencies: [i4.NgIf, i5.MatIcon],\n  styles: [\"#stopwatch-container[_ngcontent-%COMP%] {\\n    width: 600px;\\n    margin: 0 auto;\\n    padding: 10px 0;\\n    color: #e7eafb;\\n    text-align: center;\\n}\\n\\n#stopwatch[_ngcontent-%COMP%] {\\n    padding: 10px 0;\\n    font-size: x-large;\\n}\\n\\n.buttons-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: center;\\n    padding: 5px 0;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n    width: 230px;\\n    height: 40px;\\n    background-color: #202020;\\n    color: white;\\n    border-radius: 6px;\\n    border: 2px solid #fff;\\n    margin-left: 5px;\\n    margin-right: 5px;\\n    font-size: xx-large;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n    background-color: #fff;\\n    color: #202020;\\n    cursor: pointer;\\n}\\n\\n#setTimePanel[_ngcontent-%COMP%] {\\n    margin: 10px;\\n    font-size: 23px;\\n}\\n\\n#setTimePanel[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%] {\\n    width: 100px;\\n    text-align: center;\\n    font-size: 23px;\\n}\\n\\n#pauseButton[_ngcontent-%COMP%], #distractedButton[_ngcontent-%COMP%], #summaryPanel[_ngcontent-%COMP%], #notifications[_ngcontent-%COMP%] {\\n    display: none;\\n}\\n\\n#totalTime[_ngcontent-%COMP%], #totalDistractions[_ngcontent-%COMP%]{\\n    font-weight: bold;\\n}\\n\\n.clock[_ngcontent-%COMP%] {\\n    margin: 0px auto;\\n    width: 250px;\\n    height: 250px;\\n    fill: black\\n}\\n.outer-circle[_ngcontent-%COMP%], .center-circle[_ngcontent-%COMP%] {\\n    fill: DarkSlateGray;\\n}\\n\\n.seconds[_ngcontent-%COMP%] {\\n    transform-origin: center;\\n    stroke-linecap: round;\\n}\\n\\n.seconds[_ngcontent-%COMP%] {\\n    stroke: white;\\n}\\n\\n.line[_ngcontent-%COMP%] {\\n    stroke-width: 1px;\\n    stroke: white;\\n    stroke-linecap: round;\\n    transform-origin: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbWVkaXRhdGlvbi9tZWRpdGF0aW9uLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0lBQ0ksWUFBWTtJQUNaLGNBQWM7SUFDZCxlQUFlO0lBQ2YsY0FBYztJQUNkLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLGVBQWU7SUFDZixrQkFBa0I7QUFDdEI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLGNBQWM7QUFDbEI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osWUFBWTtJQUNaLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osa0JBQWtCO0lBQ2xCLHNCQUFzQjtJQUN0QixnQkFBZ0I7SUFDaEIsaUJBQWlCO0lBQ2pCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLHNCQUFzQjtJQUN0QixjQUFjO0lBQ2QsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixlQUFlO0FBQ25COztBQUVBO0lBQ0ksWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixlQUFlO0FBQ25COztBQUVBO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLGdCQUFnQjtJQUNoQixZQUFZO0lBQ1osYUFBYTtJQUNiO0FBQ0o7QUFDQTs7SUFFSSxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSx3QkFBd0I7SUFDeEIscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IscUJBQXFCO0lBQ3JCLHdCQUF3QjtBQUM1QiIsInNvdXJjZXNDb250ZW50IjpbIlxuI3N0b3B3YXRjaC1jb250YWluZXIge1xuICAgIHdpZHRoOiA2MDBweDtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBwYWRkaW5nOiAxMHB4IDA7XG4gICAgY29sb3I6ICNlN2VhZmI7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4jc3RvcHdhdGNoIHtcbiAgICBwYWRkaW5nOiAxMHB4IDA7XG4gICAgZm9udC1zaXplOiB4LWxhcmdlO1xufVxuXG4uYnV0dG9ucy1jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgcGFkZGluZzogNXB4IDA7XG59XG5cbmJ1dHRvbiB7XG4gICAgd2lkdGg6IDIzMHB4O1xuICAgIGhlaWdodDogNDBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjAyMDIwO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgYm9yZGVyOiAycHggc29saWQgI2ZmZjtcbiAgICBtYXJnaW4tbGVmdDogNXB4O1xuICAgIG1hcmdpbi1yaWdodDogNXB4O1xuICAgIGZvbnQtc2l6ZTogeHgtbGFyZ2U7XG59XG5cbmJ1dHRvbjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICBjb2xvcjogIzIwMjAyMDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbiNzZXRUaW1lUGFuZWwge1xuICAgIG1hcmdpbjogMTBweDtcbiAgICBmb250LXNpemU6IDIzcHg7XG59XG5cbiNzZXRUaW1lUGFuZWwgPiBpbnB1dCB7XG4gICAgd2lkdGg6IDEwMHB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LXNpemU6IDIzcHg7XG59XG5cbiNwYXVzZUJ1dHRvbiwgI2Rpc3RyYWN0ZWRCdXR0b24sICNzdW1tYXJ5UGFuZWwsICNub3RpZmljYXRpb25zIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4jdG90YWxUaW1lLCAjdG90YWxEaXN0cmFjdGlvbnN7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5jbG9jayB7XG4gICAgbWFyZ2luOiAwcHggYXV0bztcbiAgICB3aWR0aDogMjUwcHg7XG4gICAgaGVpZ2h0OiAyNTBweDtcbiAgICBmaWxsOiBibGFja1xufVxuLm91dGVyLWNpcmNsZSxcbi5jZW50ZXItY2lyY2xlIHtcbiAgICBmaWxsOiBEYXJrU2xhdGVHcmF5O1xufVxuXG4uc2Vjb25kcyB7XG4gICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyO1xuICAgIHN0cm9rZS1saW5lY2FwOiByb3VuZDtcbn1cblxuLnNlY29uZHMge1xuICAgIHN0cm9rZTogd2hpdGU7XG59XG5cbi5saW5lIHtcbiAgICBzdHJva2Utd2lkdGg6IDFweDtcbiAgICBzdHJva2U6IHdoaXRlO1xuICAgIHN0cm9rZS1saW5lY2FwOiByb3VuZDtcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXI7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["MatDialogConfig","SnackBarDistractionComponent","MeditationSummaryComponent","i0","MeditationComponent","constructor","activatedroute","router","snackBar","dialog","params","subscribe","data","minutes","navigate","ngOnInit","isDistractedButtonVisible","isStopWatchVisible","totalTime","minutesToSeconds","degreesForSecond","degreesAccumulator","playBell","startMeditation","audio","Audio","play","timeoutId","setTimeout","seconds","secondsDisplay","toString","minutesDisplay","secondsLine","nativeElement","style","transform","isSummaryPanelVisible","clearTimeout","addDistraction","distractions","openDistractionSnackBar","openFromComponent","duration","openDialog","dialogConfig","disableClose","autoFocus","open","selectors","viewQuery"],"sourceRoot":"","sources":["/home/ernesto/Proyectos/wellbeing-ui/wellbeing-ui/src/app/meditation/meditation.component.ts","/home/ernesto/Proyectos/wellbeing-ui/wellbeing-ui/src/app/meditation/meditation.component.html"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { SnackBarDistractionComponent } from '../snack-bar-distraction/snack-bar-distraction.component';\nimport { MeditationSummaryComponent } from '../meditation-summary/meditation-summary.component';\n\n@Component({\n  selector: 'app-meditation',\n  templateUrl: './meditation.component.html',\n  styleUrls: ['./meditation.component.css']\n})\nexport class MeditationComponent implements OnInit {\n\n  constructor( private activatedroute: ActivatedRoute, \n    private router: Router, \n    private snackBar: MatSnackBar,\n    private dialog: MatDialog ) {\n    this.activatedroute.params.subscribe(data => {\n      this.minutes = data.minutes;\n    });\n\n    if(this.minutes <= 0)\n      this.router.navigate(['/set-meditation-time']);\n  }\n  \n\n  @ViewChild('secondsLine') secondsLine!: ElementRef;\n\n  distractions = 0;\n  isDistractedButtonVisible = false;\n  isSummaryPanelVisible = false;\n  isStopWatchVisible = false;\n  secondsDisplay = '';\n  minutesDisplay = '';\n  seconds = 60;\n  minutes = 0;\n  totalTime = 0;\n  minutesToSeconds = 0;\n  degreesForSecond = 0;\n  degreesAccumulator = 0;\n\n  ngOnInit(): void {\n    this.isDistractedButtonVisible = true;\n    this.isStopWatchVisible = true;\n    this.totalTime = this.minutes;\n    this.minutesToSeconds = this.minutes * 60;\n    this.degreesForSecond = 360 / this.minutesToSeconds;\n    this.degreesAccumulator = this.degreesForSecond;\n    this.minutes--;\n    this.playBell();\n    this.startMeditation();\n  }\n\n  playBell() {\n    const audio = new Audio('assets/sound/tibetan-bell-sound-8s.mp3');\n    audio.play();\n  }\n\n  startMeditation(){\n\n    let timeoutId = setTimeout(() => {\n      this.seconds--;\n\n      if (this.seconds == -1) {\n          this.minutes -= 1;\n          this.seconds = 59;\n      }\n      if (this.seconds < 10) {\n        this.secondsDisplay = '0' + this.seconds;\n      } else {\n        this.secondsDisplay = this.seconds.toString();\n      }\n      if (this.minutes < 10) {\n        this.minutesDisplay = '0' + this.minutes;\n      } else {\n        this.minutesDisplay = this.minutes.toString();\n      }\n\n      this.secondsLine.nativeElement.style.transform = 'rotate(' + this.degreesAccumulator + 'deg)';\n      this.degreesAccumulator += this.degreesForSecond;\n\n      if(this.minutes == 0 && this.seconds == 0)\n      {\n          this.playBell();\n          this.isSummaryPanelVisible = true;\n          this.isDistractedButtonVisible = false;\n          this.isStopWatchVisible = false;\n\n          clearTimeout(timeoutId);\n\n          return;\n      }\n\n      this.startMeditation();\n    }, 1000);\n  }\n\n  addDistraction(){\n    this.distractions += 1;\n    this.openDistractionSnackBar();\n  }\n\n  openDistractionSnackBar() {\n    this.snackBar.openFromComponent(SnackBarDistractionComponent, {\n      duration: 8 * 1000,\n    });\n  }\n\n  openDialog() {\n    const dialogConfig = new MatDialogConfig();\n\n    dialogConfig.disableClose = true;\n    dialogConfig.autoFocus = true;\n\n    dialogConfig.data = {\n      minutes: this.minutes,\n      distractions: this.distractions\n    };\n\n    this.dialog.open(MeditationSummaryComponent, dialogConfig);\n}\n\n}\n","<div id=\"stopwatch-container\">\n    <h1>Meditate</h1>\n    <div class=\"clock\">\n        <svg class=\"circle\" viewBox=\"0 0 120 120\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n          <circle cx=\"60\" cy=\"60\" r=\"60\" class=\"outer-circle\"/>\n          <circle cx=\"60\" cy=\"60\" r=\"57\" />\n          <line x1=\"60\" y1=\"0\" x2=\"60\" y2=\"60\" class=\"seconds\" #secondsLine/>\n          <circle cx=\"60\" cy=\"60\" r=\"3\" class=\"center-circle\" />\n          <line x1=\"60\" y1=\"5\" x2=\"60\" y2=\"10\" class=\"line\" />\n        </svg>\n      </div>            \n    <div id=\"stopwatch\">{{minutesDisplay}}:{{secondsDisplay}}</div>\n    <div id=\"notifications\"></div>\n    \n    <div class=\"buttons-container\">\n      <button onclick=\"pause()\" id=\"pauseButton\">Pause</button>\n      <button mat-icon-button *ngIf=\"this.isDistractedButtonVisible\" (click)=\"addDistraction()\">\n          <mat-icon>add_circle</mat-icon> Distraction\n      </button>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}